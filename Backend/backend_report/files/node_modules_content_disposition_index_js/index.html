<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules\content-disposition\index.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules\content-disposition\index.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">61.18</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">458</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">50.00</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.78</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/*!
 * content-disposition
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */

&#039;use strict&#039;

/**
 * Module exports.
 * @public
 */

module.exports = contentDisposition
module.exports.parse = parse

/**
 * Module dependencies.
 * @private
 */

var basename = require(&#039;path&#039;).basename
var Buffer = require(&#039;safe-buffer&#039;).Buffer

/**
 * RegExp to match non attr-char, *after* encodeURIComponent (i.e. not including &quot;%&quot;)
 * @private
 */

var ENCODE_URL_ATTR_CHAR_REGEXP = /[\x00-\x20&quot;&#039;()*,/:;&lt;=&gt;?@[\\\]{}\x7f]/g // eslint-disable-line no-control-regex

/**
 * RegExp to match percent encoding escape.
 * @private
 */

var HEX_ESCAPE_REGEXP = /%[0-9A-Fa-f]{2}/
var HEX_ESCAPE_REPLACE_REGEXP = /%([0-9A-Fa-f]{2})/g

/**
 * RegExp to match non-latin1 characters.
 * @private
 */

var NON_LATIN1_REGEXP = /[^\x20-\x7e\xa0-\xff]/g

/**
 * RegExp to match quoted-pair in RFC 2616
 *
 * quoted-pair = &quot;\&quot; CHAR
 * CHAR        = &lt;any US-ASCII character (octets 0 - 127)&gt;
 * @private
 */

var QESC_REGEXP = /\\([\u0000-\u007f])/g // eslint-disable-line no-control-regex

/**
 * RegExp to match chars that must be quoted-pair in RFC 2616
 * @private
 */

var QUOTE_REGEXP = /([\\&quot;])/g

/**
 * RegExp for various RFC 2616 grammar
 *
 * parameter     = token &quot;=&quot; ( token | quoted-string )
 * token         = 1*&lt;any CHAR except CTLs or separators&gt;
 * separators    = &quot;(&quot; | &quot;)&quot; | &quot;&lt;&quot; | &quot;&gt;&quot; | &quot;@&quot;
 *               | &quot;,&quot; | &quot;;&quot; | &quot;:&quot; | &quot;\&quot; | &lt;&quot;&gt;
 *               | &quot;/&quot; | &quot;[&quot; | &quot;]&quot; | &quot;?&quot; | &quot;=&quot;
 *               | &quot;{&quot; | &quot;}&quot; | SP | HT
 * quoted-string = ( &lt;&quot;&gt; *(qdtext | quoted-pair ) &lt;&quot;&gt; )
 * qdtext        = &lt;any TEXT except &lt;&quot;&gt;&gt;
 * quoted-pair   = &quot;\&quot; CHAR
 * CHAR          = &lt;any US-ASCII character (octets 0 - 127)&gt;
 * TEXT          = &lt;any OCTET except CTLs, but including LWS&gt;
 * LWS           = [CRLF] 1*( SP | HT )
 * CRLF          = CR LF
 * CR            = &lt;US-ASCII CR, carriage return (13)&gt;
 * LF            = &lt;US-ASCII LF, linefeed (10)&gt;
 * SP            = &lt;US-ASCII SP, space (32)&gt;
 * HT            = &lt;US-ASCII HT, horizontal-tab (9)&gt;
 * CTL           = &lt;any US-ASCII control character (octets 0 - 31) and DEL (127)&gt;
 * OCTET         = &lt;any 8-bit sequence of data&gt;
 * @private
 */

var PARAM_REGEXP = /;[\x09\x20]*([!#$%&amp;&#039;*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*(&quot;(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*&quot;|[!#$%&amp;&#039;*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g // eslint-disable-line no-control-regex
var TEXT_REGEXP = /^[\x20-\x7e\x80-\xff]+$/
var TOKEN_REGEXP = /^[!#$%&amp;&#039;*+.0-9A-Z^_`a-z|~-]+$/

/**
 * RegExp for various RFC 5987 grammar
 *
 * ext-value     = charset  &quot;&#039;&quot; [ language ] &quot;&#039;&quot; value-chars
 * charset       = &quot;UTF-8&quot; / &quot;ISO-8859-1&quot; / mime-charset
 * mime-charset  = 1*mime-charsetc
 * mime-charsetc = ALPHA / DIGIT
 *               / &quot;!&quot; / &quot;#&quot; / &quot;$&quot; / &quot;%&quot; / &quot;&amp;&quot;
 *               / &quot;+&quot; / &quot;-&quot; / &quot;^&quot; / &quot;_&quot; / &quot;`&quot;
 *               / &quot;{&quot; / &quot;}&quot; / &quot;~&quot;
 * language      = ( 2*3ALPHA [ extlang ] )
 *               / 4ALPHA
 *               / 5*8ALPHA
 * extlang       = *3( &quot;-&quot; 3ALPHA )
 * value-chars   = *( pct-encoded / attr-char )
 * pct-encoded   = &quot;%&quot; HEXDIG HEXDIG
 * attr-char     = ALPHA / DIGIT
 *               / &quot;!&quot; / &quot;#&quot; / &quot;$&quot; / &quot;&amp;&quot; / &quot;+&quot; / &quot;-&quot; / &quot;.&quot;
 *               / &quot;^&quot; / &quot;_&quot; / &quot;`&quot; / &quot;|&quot; / &quot;~&quot;
 * @private
 */

var EXT_VALUE_REGEXP = /^([A-Za-z0-9!#$%&amp;+\-^_`{}~]+)&#039;(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)&#039;((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&amp;+.^_`|~-])+)$/

/**
 * RegExp for various RFC 6266 grammar
 *
 * disposition-type = &quot;inline&quot; | &quot;attachment&quot; | disp-ext-type
 * disp-ext-type    = token
 * disposition-parm = filename-parm | disp-ext-parm
 * filename-parm    = &quot;filename&quot; &quot;=&quot; value
 *                  | &quot;filename*&quot; &quot;=&quot; ext-value
 * disp-ext-parm    = token &quot;=&quot; value
 *                  | ext-token &quot;=&quot; ext-value
 * ext-token        = &lt;the characters in token, followed by &quot;*&quot;&gt;
 * @private
 */

var DISPOSITION_TYPE_REGEXP = /^([!#$%&amp;&#039;*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/ // eslint-disable-line no-control-regex

/**
 * Create an attachment Content-Disposition header.
 *
 * @param {string} [filename]
 * @param {object} [options]
 * @param {string} [options.type=attachment]
 * @param {string|boolean} [options.fallback=true]
 * @return {string}
 * @public
 */

function contentDisposition (filename, options) {
  var opts = options || {}

  // get type
  var type = opts.type || &#039;attachment&#039;

  // get parameters
  var params = createparams(filename, opts.fallback)

  // format into string
  return format(new ContentDisposition(type, params))
}

/**
 * Create parameters object from filename and fallback.
 *
 * @param {string} [filename]
 * @param {string|boolean} [fallback=true]
 * @return {object}
 * @private
 */

function createparams (filename, fallback) {
  if (filename === undefined) {
    return
  }

  var params = {}

  if (typeof filename !== &#039;string&#039;) {
    throw new TypeError(&#039;filename must be a string&#039;)
  }

  // fallback defaults to true
  if (fallback === undefined) {
    fallback = true
  }

  if (typeof fallback !== &#039;string&#039; &amp;&amp; typeof fallback !== &#039;boolean&#039;) {
    throw new TypeError(&#039;fallback must be a string or boolean&#039;)
  }

  if (typeof fallback === &#039;string&#039; &amp;&amp; NON_LATIN1_REGEXP.test(fallback)) {
    throw new TypeError(&#039;fallback must be ISO-8859-1 string&#039;)
  }

  // restrict to file base name
  var name = basename(filename)

  // determine if name is suitable for quoted string
  var isQuotedString = TEXT_REGEXP.test(name)

  // generate fallback name
  var fallbackName = typeof fallback !== &#039;string&#039;
    ? fallback &amp;&amp; getlatin1(name)
    : basename(fallback)
  var hasFallback = typeof fallbackName === &#039;string&#039; &amp;&amp; fallbackName !== name

  // set extended filename parameter
  if (hasFallback || !isQuotedString || HEX_ESCAPE_REGEXP.test(name)) {
    params[&#039;filename*&#039;] = name
  }

  // set filename parameter
  if (isQuotedString || hasFallback) {
    params.filename = hasFallback
      ? fallbackName
      : name
  }

  return params
}

/**
 * Format object to Content-Disposition header.
 *
 * @param {object} obj
 * @param {string} obj.type
 * @param {object} [obj.parameters]
 * @return {string}
 * @private
 */

function format (obj) {
  var parameters = obj.parameters
  var type = obj.type

  if (!type || typeof type !== &#039;string&#039; || !TOKEN_REGEXP.test(type)) {
    throw new TypeError(&#039;invalid type&#039;)
  }

  // start with normalized type
  var string = String(type).toLowerCase()

  // append parameters
  if (parameters &amp;&amp; typeof parameters === &#039;object&#039;) {
    var param
    var params = Object.keys(parameters).sort()

    for (var i = 0; i &lt; params.length; i++) {
      param = params[i]

      var val = param.substr(-1) === &#039;*&#039;
        ? ustring(parameters[param])
        : qstring(parameters[param])

      string += &#039;; &#039; + param + &#039;=&#039; + val
    }
  }

  return string
}

/**
 * Decode a RFC 5987 field value (gracefully).
 *
 * @param {string} str
 * @return {string}
 * @private
 */

function decodefield (str) {
  var match = EXT_VALUE_REGEXP.exec(str)

  if (!match) {
    throw new TypeError(&#039;invalid extended field value&#039;)
  }

  var charset = match[1].toLowerCase()
  var encoded = match[2]
  var value

  // to binary string
  var binary = encoded.replace(HEX_ESCAPE_REPLACE_REGEXP, pdecode)

  switch (charset) {
    case &#039;iso-8859-1&#039;:
      value = getlatin1(binary)
      break
    case &#039;utf-8&#039;:
      value = Buffer.from(binary, &#039;binary&#039;).toString(&#039;utf8&#039;)
      break
    default:
      throw new TypeError(&#039;unsupported charset in extended field&#039;)
  }

  return value
}

/**
 * Get ISO-8859-1 version of string.
 *
 * @param {string} val
 * @return {string}
 * @private
 */

function getlatin1 (val) {
  // simple Unicode -&gt; ISO-8859-1 transformation
  return String(val).replace(NON_LATIN1_REGEXP, &#039;?&#039;)
}

/**
 * Parse Content-Disposition header string.
 *
 * @param {string} string
 * @return {object}
 * @public
 */

function parse (string) {
  if (!string || typeof string !== &#039;string&#039;) {
    throw new TypeError(&#039;argument string is required&#039;)
  }

  var match = DISPOSITION_TYPE_REGEXP.exec(string)

  if (!match) {
    throw new TypeError(&#039;invalid type format&#039;)
  }

  // normalize type
  var index = match[0].length
  var type = match[1].toLowerCase()

  var key
  var names = []
  var params = {}
  var value

  // calculate index to start at
  index = PARAM_REGEXP.lastIndex = match[0].substr(-1) === &#039;;&#039;
    ? index - 1
    : index

  // match parameters
  while ((match = PARAM_REGEXP.exec(string))) {
    if (match.index !== index) {
      throw new TypeError(&#039;invalid parameter format&#039;)
    }

    index += match[0].length
    key = match[1].toLowerCase()
    value = match[2]

    if (names.indexOf(key) !== -1) {
      throw new TypeError(&#039;invalid duplicate parameter&#039;)
    }

    names.push(key)

    if (key.indexOf(&#039;*&#039;) + 1 === key.length) {
      // decode extended value
      key = key.slice(0, -1)
      value = decodefield(value)

      // overwrite existing value
      params[key] = value
      continue
    }

    if (typeof params[key] === &#039;string&#039;) {
      continue
    }

    if (value[0] === &#039;&quot;&#039;) {
      // remove quotes and escapes
      value = value
        .substr(1, value.length - 2)
        .replace(QESC_REGEXP, &#039;$1&#039;)
    }

    params[key] = value
  }

  if (index !== -1 &amp;&amp; index !== string.length) {
    throw new TypeError(&#039;invalid parameter format&#039;)
  }

  return new ContentDisposition(type, params)
}

/**
 * Percent decode a single character.
 *
 * @param {string} str
 * @param {string} hex
 * @return {string}
 * @private
 */

function pdecode (str, hex) {
  return String.fromCharCode(parseInt(hex, 16))
}

/**
 * Percent encode a single character.
 *
 * @param {string} char
 * @return {string}
 * @private
 */

function pencode (char) {
  return &#039;%&#039; + String(char)
    .charCodeAt(0)
    .toString(16)
    .toUpperCase()
}

/**
 * Quote a string for HTTP.
 *
 * @param {string} val
 * @return {string}
 * @private
 */

function qstring (val) {
  var str = String(val)

  return &#039;&quot;&#039; + str.replace(QUOTE_REGEXP, &#039;\\$1&#039;) + &#039;&quot;&#039;
}

/**
 * Encode a Unicode string for HTTP (RFC 5987).
 *
 * @param {string} val
 * @return {string}
 * @private
 */

function ustring (val) {
  var str = String(val)

  // percent encode as UTF-8
  var encoded = encodeURIComponent(str)
    .replace(ENCODE_URL_ATTR_CHAR_REGEXP, pencode)

  return &#039;UTF-8\&#039;\&#039;&#039; + encoded
}

/**
 * Class for parsed Content-Disposition header for v8 optimization
 *
 * @public
 * @param {string} type
 * @param {object} parameters
 * @constructor
 */

function ContentDisposition (type, parameters) {
  this.type = type
  this.parameters = parameters
}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
