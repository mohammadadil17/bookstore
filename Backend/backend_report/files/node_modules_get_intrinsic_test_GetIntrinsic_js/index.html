<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules\get-intrinsic\test\GetIntrinsic.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules\get-intrinsic\test\GetIntrinsic.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">77.72</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">274</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">28.53</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.50</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&#039;use strict&#039;;

var GetIntrinsic = require(&#039;../&#039;);

var test = require(&#039;tape&#039;);
var forEach = require(&#039;for-each&#039;);
var debug = require(&#039;object-inspect&#039;);
var generatorFns = require(&#039;make-generator-function&#039;)();
var asyncFns = require(&#039;make-async-function&#039;).list();
var asyncGenFns = require(&#039;make-async-generator-function&#039;)();
var mockProperty = require(&#039;mock-property&#039;);

var callBound = require(&#039;call-bind/callBound&#039;);
var v = require(&#039;es-value-fixtures&#039;);
var $gOPD = require(&#039;gopd&#039;);
var DefinePropertyOrThrow = require(&#039;es-abstract/2021/DefinePropertyOrThrow&#039;);

var $isProto = callBound(&#039;%Object.prototype.isPrototypeOf%&#039;);

test(&#039;export&#039;, function (t) {
	t.equal(typeof GetIntrinsic, &#039;function&#039;, &#039;it is a function&#039;);
	t.equal(GetIntrinsic.length, 2, &#039;function has length of 2&#039;);

	t.end();
});

test(&#039;throws&#039;, function (t) {
	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;not an intrinsic&#039;); },
		SyntaxError,
		&#039;nonexistent intrinsic throws a syntax error&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;&#039;); },
		TypeError,
		&#039;empty string intrinsic throws a type error&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;.&#039;); },
		SyntaxError,
		&#039;&quot;just a dot&quot; intrinsic throws a syntax error&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;%String&#039;); },
		SyntaxError,
		&#039;Leading % without trailing % throws a syntax error&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;String%&#039;); },
		SyntaxError,
		&#039;Trailing % without leading % throws a syntax error&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&quot;String[&#039;prototype]&quot;); },
		SyntaxError,
		&#039;Dynamic property access is disallowed for intrinsics (unterminated string)&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;%Proxy.prototype.undefined%&#039;); },
		TypeError,
		&quot;Throws when middle part doesn&#039;t exist (%Proxy.prototype.undefined%)&quot;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;%Array.prototype%garbage%&#039;); },
		SyntaxError,
		&#039;Throws with extra percent signs&#039;
	);

	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;%Array.prototype%push%&#039;); },
		SyntaxError,
		&#039;Throws with extra percent signs, even on an existing intrinsic&#039;
	);

	forEach(v.nonStrings, function (nonString) {
		t[&#039;throws&#039;](
			function () { GetIntrinsic(nonString); },
			TypeError,
			debug(nonString) + &#039; is not a String&#039;
		);
	});

	forEach(v.nonBooleans, function (nonBoolean) {
		t[&#039;throws&#039;](
			function () { GetIntrinsic(&#039;%&#039;, nonBoolean); },
			TypeError,
			debug(nonBoolean) + &#039; is not a Boolean&#039;
		);
	});

	forEach([
		&#039;toString&#039;,
		&#039;propertyIsEnumerable&#039;,
		&#039;hasOwnProperty&#039;
	], function (objectProtoMember) {
		t[&#039;throws&#039;](
			function () { GetIntrinsic(objectProtoMember); },
			SyntaxError,
			debug(objectProtoMember) + &#039; is not an intrinsic&#039;
		);
	});

	t.end();
});

test(&#039;base intrinsics&#039;, function (t) {
	t.equal(GetIntrinsic(&#039;%Object%&#039;), Object, &#039;%Object% yields Object&#039;);
	t.equal(GetIntrinsic(&#039;Object&#039;), Object, &#039;Object yields Object&#039;);
	t.equal(GetIntrinsic(&#039;%Array%&#039;), Array, &#039;%Array% yields Array&#039;);
	t.equal(GetIntrinsic(&#039;Array&#039;), Array, &#039;Array yields Array&#039;);

	t.end();
});

test(&#039;dotted paths&#039;, function (t) {
	t.equal(GetIntrinsic(&#039;%Object.prototype.toString%&#039;), Object.prototype.toString, &#039;%Object.prototype.toString% yields Object.prototype.toString&#039;);
	t.equal(GetIntrinsic(&#039;Object.prototype.toString&#039;), Object.prototype.toString, &#039;Object.prototype.toString yields Object.prototype.toString&#039;);
	t.equal(GetIntrinsic(&#039;%Array.prototype.push%&#039;), Array.prototype.push, &#039;%Array.prototype.push% yields Array.prototype.push&#039;);
	t.equal(GetIntrinsic(&#039;Array.prototype.push&#039;), Array.prototype.push, &#039;Array.prototype.push yields Array.prototype.push&#039;);

	test(&#039;underscore paths are aliases for dotted paths&#039;, { skip: !Object.isFrozen || Object.isFrozen(Object.prototype) }, function (st) {
		var original = GetIntrinsic(&#039;%ObjProto_toString%&#039;);

		forEach([
			&#039;%Object.prototype.toString%&#039;,
			&#039;Object.prototype.toString&#039;,
			&#039;%ObjectPrototype.toString%&#039;,
			&#039;ObjectPrototype.toString&#039;,
			&#039;%ObjProto_toString%&#039;,
			&#039;ObjProto_toString&#039;
		], function (name) {
			DefinePropertyOrThrow(Object.prototype, &#039;toString&#039;, {
				&#039;[[Value]]&#039;: function toString() {
					return original.apply(this, arguments);
				}
			});
			st.equal(GetIntrinsic(name), original, name + &#039; yields original Object.prototype.toString&#039;);
		});

		DefinePropertyOrThrow(Object.prototype, &#039;toString&#039;, { &#039;[[Value]]&#039;: original });
		st.end();
	});

	test(&#039;dotted paths cache&#039;, { skip: !Object.isFrozen || Object.isFrozen(Object.prototype) }, function (st) {
		var original = GetIntrinsic(&#039;%Object.prototype.propertyIsEnumerable%&#039;);

		forEach([
			&#039;%Object.prototype.propertyIsEnumerable%&#039;,
			&#039;Object.prototype.propertyIsEnumerable&#039;,
			&#039;%ObjectPrototype.propertyIsEnumerable%&#039;,
			&#039;ObjectPrototype.propertyIsEnumerable&#039;
		], function (name) {
			var restore = mockProperty(Object.prototype, &#039;propertyIsEnumerable&#039;, {
				value: function propertyIsEnumerable() {
					return original.apply(this, arguments);
				}
			});
			st.equal(GetIntrinsic(name), original, name + &#039; yields cached Object.prototype.propertyIsEnumerable&#039;);

			restore();
		});

		st.end();
	});

	test(&#039;dotted path reports correct error&#039;, function (st) {
		st[&#039;throws&#039;](function () {
			GetIntrinsic(&#039;%NonExistentIntrinsic.prototype.property%&#039;);
		}, /%NonExistentIntrinsic%/, &#039;The base intrinsic of %NonExistentIntrinsic.prototype.property% is %NonExistentIntrinsic%&#039;);

		st[&#039;throws&#039;](function () {
			GetIntrinsic(&#039;%NonExistentIntrinsicPrototype.property%&#039;);
		}, /%NonExistentIntrinsicPrototype%/, &#039;The base intrinsic of %NonExistentIntrinsicPrototype.property% is %NonExistentIntrinsicPrototype%&#039;);

		st.end();
	});

	t.end();
});

test(&#039;accessors&#039;, { skip: !$gOPD || typeof Map !== &#039;function&#039; }, function (t) {
	var actual = $gOPD(Map.prototype, &#039;size&#039;);
	t.ok(actual, &#039;Map.prototype.size has a descriptor&#039;);
	t.equal(typeof actual.get, &#039;function&#039;, &#039;Map.prototype.size has a getter function&#039;);
	t.equal(GetIntrinsic(&#039;%Map.prototype.size%&#039;), actual.get, &#039;%Map.prototype.size% yields the getter for it&#039;);
	t.equal(GetIntrinsic(&#039;Map.prototype.size&#039;), actual.get, &#039;Map.prototype.size yields the getter for it&#039;);

	t.end();
});

test(&#039;generator functions&#039;, { skip: !generatorFns.length }, function (t) {
	var $GeneratorFunction = GetIntrinsic(&#039;%GeneratorFunction%&#039;);
	var $GeneratorFunctionPrototype = GetIntrinsic(&#039;%Generator%&#039;);
	var $GeneratorPrototype = GetIntrinsic(&#039;%GeneratorPrototype%&#039;);

	forEach(generatorFns, function (genFn) {
		var fnName = genFn.name;
		fnName = fnName ? &quot;&#039;&quot; + fnName + &quot;&#039;&quot; : &#039;genFn&#039;;

		t.ok(genFn instanceof $GeneratorFunction, fnName + &#039; instanceof %GeneratorFunction%&#039;);
		t.ok($isProto($GeneratorFunctionPrototype, genFn), &#039;%Generator% is prototype of &#039; + fnName);
		t.ok($isProto($GeneratorPrototype, genFn.prototype), &#039;%GeneratorPrototype% is prototype of &#039; + fnName + &#039;.prototype&#039;);
	});

	t.end();
});

test(&#039;async functions&#039;, { skip: !asyncFns.length }, function (t) {
	var $AsyncFunction = GetIntrinsic(&#039;%AsyncFunction%&#039;);
	var $AsyncFunctionPrototype = GetIntrinsic(&#039;%AsyncFunctionPrototype%&#039;);

	forEach(asyncFns, function (asyncFn) {
		var fnName = asyncFn.name;
		fnName = fnName ? &quot;&#039;&quot; + fnName + &quot;&#039;&quot; : &#039;asyncFn&#039;;

		t.ok(asyncFn instanceof $AsyncFunction, fnName + &#039; instanceof %AsyncFunction%&#039;);
		t.ok($isProto($AsyncFunctionPrototype, asyncFn), &#039;%AsyncFunctionPrototype% is prototype of &#039; + fnName);
	});

	t.end();
});

test(&#039;async generator functions&#039;, { skip: asyncGenFns.length === 0 }, function (t) {
	var $AsyncGeneratorFunction = GetIntrinsic(&#039;%AsyncGeneratorFunction%&#039;);
	var $AsyncGeneratorFunctionPrototype = GetIntrinsic(&#039;%AsyncGenerator%&#039;);
	var $AsyncGeneratorPrototype = GetIntrinsic(&#039;%AsyncGeneratorPrototype%&#039;);

	forEach(asyncGenFns, function (asyncGenFn) {
		var fnName = asyncGenFn.name;
		fnName = fnName ? &quot;&#039;&quot; + fnName + &quot;&#039;&quot; : &#039;asyncGenFn&#039;;

		t.ok(asyncGenFn instanceof $AsyncGeneratorFunction, fnName + &#039; instanceof %AsyncGeneratorFunction%&#039;);
		t.ok($isProto($AsyncGeneratorFunctionPrototype, asyncGenFn), &#039;%AsyncGenerator% is prototype of &#039; + fnName);
		t.ok($isProto($AsyncGeneratorPrototype, asyncGenFn.prototype), &#039;%AsyncGeneratorPrototype% is prototype of &#039; + fnName + &#039;.prototype&#039;);
	});

	t.end();
});

test(&#039;%ThrowTypeError%&#039;, function (t) {
	var $ThrowTypeError = GetIntrinsic(&#039;%ThrowTypeError%&#039;);

	t.equal(typeof $ThrowTypeError, &#039;function&#039;, &#039;is a function&#039;);
	t[&#039;throws&#039;](
		$ThrowTypeError,
		TypeError,
		&#039;%ThrowTypeError% throws a TypeError&#039;
	);

	t.end();
});

test(&#039;allowMissing&#039;, { skip: asyncGenFns.length &gt; 0 }, function (t) {
	t[&#039;throws&#039;](
		function () { GetIntrinsic(&#039;%AsyncGeneratorPrototype%&#039;); },
		TypeError,
		&#039;throws when missing&#039;
	);

	t.equal(
		GetIntrinsic(&#039;%AsyncGeneratorPrototype%&#039;, true),
		undefined,
		&#039;does not throw when allowMissing&#039;
	);

	t.end();
});</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
